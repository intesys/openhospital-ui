"use strict";
/**
 * Ensures just one SIGINT listener is active
 */
Object.defineProperty(exports, "__esModule", { value: true });
const log_1 = require("./log");
let unregisterSigint;
exports.default = (server) => {
    if (unregisterSigint) {
        unregisterSigint();
    }
    unregisterSigint = handleSigint(server);
};
const handleSigint = (server) => {
    const onExit = function () {
        log_1.print('Bye');
        server.close(() => { process.exit(0); });
    };
    process.on('SIGINT', onExit);
    return function unregisterSigint() {
        process.off('SIGINT', onExit);
    };
};
//# sourceMappingURL=handleSigint.js.map